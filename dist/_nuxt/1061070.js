(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{1361:function(t,e,n){"use strict";n.r(e);n(54),n(340),n(93);var r=[{title:"T/R",dataIndex:"id",sorter:!0,width:"10%",scopedSlots:{customRender:"id"}},{title:"JSHSHR raqami (pinfl)",dataIndex:"pinfl",sorter:!0,width:"20%",scopedSlots:{customRender:"pinfl"}},{title:"Universitet nomi",dataIndex:"university",sorter:!0,width:"30%",scopedSlots:{customRender:"university"}},{title:"Action",width:"10%",key:"action",scopedSlots:{customRender:"action"}}],o={props:{user:{typeof:Array,default:null},total:{typeof:Number,default:null},totalPages:{typeof:Number,default:null},isFetched:{type:Boolean,default:!1}},data:function(){return{current:parseInt(this.$route.query.page)?parseInt(this.$route.query.page):1,pageSize:10,loading:!1,columns:r,items:[],visible:!1,id:"",search:[],searchText:"",isUpdate:!1,data:[{id:"1",name:"sss"}],universities:[],checkData:"",isCheck:!1,pinfl:"",isUpload:!1}},mounted:function(){var t=this;this.$store.dispatch("entity/loadAll",{entity:"university",name:"all",url:"api/user/Universities/",params:{p:"not"},cb:{success:function(e){t.universities=e},error:function(){}}})},methods:{cancel:function(){this.visible=!1,this.form2.setFieldsValue({pinfl:""}),this.form2.setFieldsValue({given_date:""})},cancel2:function(){this.visible=!1,this.isCheck=!1,this.form.setFieldsValue({universityId:null})},openVisible:function(){this.isUpdate=!1,this.visible=!0},ddd:function(){this.isUpdate=!1,this.form2.setFieldsValue({pinfl:null}),this.form2.setFieldsValue({given_date:null}),this.form.setFieldsValue({universityId:null}),this.isCheck=!1},onSearch:function(t){t.target.value?this.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/searchUAdmin",params:{page:1,limit:20,extra:{search:t.target.value}},cb:{success:function(t){},error:function(){}}}):this.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/UAdmins",params:{page:this.$route.query.page?this.$route.query.page:1,limit:20},cb:{success:function(t){},error:function(){}}})},putClick:function(t){var e=this;this.id=t,this.visible=!0,this.isUpdate=!0,this.isCheck=!0,this.$store.dispatch("entity/loadOne",{entity:"user",name:t,url:"api/admin/uAdmin/".concat(t),params:{p:"not"},cb:{success:function(t){t&&(e.pinfl=t.pinfl,e.form.setFieldsValue({universityId:t.universityId}))}}})},handelChange:function(t){this.$router.push({query:{page:t}}),this.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/UAdmins",params:{page:parseInt(t),limit:20},cb:{success:function(t){},error:function(){}}})},handleSubmit2:function(t){var e=this;t.preventDefault(),this.isUpload=!0,this.form2.validateFields((function(t,n){if(!t){var r={pinfl:n.pinfl,given_date:e.formatDate(n.given_date,"YYYY-MM-DD")};e.pinfl=n.pinfl,e.$store.dispatch("entity/form",{entity:"userAdmin",name:"all",id:e.id,updateData:!1,prependData:!1,method:"post",url:"api/admin/check",params:{p:"not"},values:r,cb:{success:function(t){t.data.data?(e.checkData=t.data.data,e.isCheck=!0,e.form2.resetFields(),e.isUpload=!1):(e.isCheck=!1,e.isUpload=!1,e.openNotificationWithIcon("error","Ma'lumotlar xato kiritilgan bo'lishi mumkin!"))},error:function(t){t.response&&(e.isUpload=!1,e.openNotificationWithIcon("error",t.response.data.message))}}})}}))},handleSubmit:function(t){var e=this;t.preventDefault(),this.form.validateFields((function(t,n){if(!t){var r={pinfl:e.pinfl,universityId:n.universityId};e.$store.dispatch("entity/form",{entity:"user",name:"all",id:e.id,updateData:!1,prependData:!1,method:e.isUpdate?"put":"post",url:e.isUpdate?"api/admin/updateUAdmin/".concat(e.id):"api/admin/createUAdmin",params:{p:"not"},values:r,cb:{success:function(t){e.openNotificationWithIcon("success",t.data.message),e.form.resetFields(),e.current=e.isUpdate?e.$route.query.page?parseInt(e.$route.query.page):1:parseInt(e.totalPages),e.$router.push({query:{page:e.current}}),e.visible=!1,e.isCheck=!1,e.isUpdate=!1,e.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/UAdmins",params:{page:e.isUpdate?e.$route.query.page:e.totalPages,limit:20},cb:{success:function(t){},error:function(){}}})},error:function(t){t.response&&(e.isUpdate=!1,e.openNotificationWithIcon("error",t.response.data.message))}}})}}))},openNotificationWithIcon:function(t,e){this.$notification[t]({message:"Diqqat!",description:e})},filterOption:function(input,option){return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase())>=0},showDeleteConfirm:function(t){var e=this;this.$store.dispatch("entity/formDefault",{url:"api/admin/deleteUser/".concat(t,"/"),method:"delete",params:{p:"not"},cb:{success:function(t){e.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/users",params:{page:e.isUpdate?e.$route.query.page:e.totalPages,limit:10},cb:{success:function(t){},error:function(){}}}),e.openNotificationWithIcon("success",t.data.message)},error:function(t){e.openNotificationWithIcon("error",t.data.message)}}})},formatDate:function(t,e){var dt=new Date(t),n=("00"+(dt.getMonth()+1)).slice(-2),r=("00"+dt.getDate()).slice(-2),o=dt.getFullYear(),l=("00"+dt.getHours()).slice(-2),c=("00"+dt.getMinutes()).slice(-2),d=("00"+dt.getSeconds()).slice(-2);switch(e){case"YYYY":return o;case"DD-MM-YYYY":return r+"-"+n+"-"+o;case"YYYY-MM-DD":return o+"-"+n+"-"+r;case"DD.MM.YYYY / HH:mm:ss":return r+"."+n+"."+o+" / "+l+":"+c+":"+d;case"forComment":return l+":"+c+" / "+r+"."+n+"."+o;default:return r+"."+n+"."+o}}},computed:{},beforeCreate:function(){this.form2=this.$form.createForm(this,{name:"normal_login2"}),this.form=this.$form.createForm(this,{name:"normal_login"})}},l=n(24),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"header-college"},[e("a-input-search",{staticStyle:{width:"550px","margin-bottom":"20px"},attrs:{placeholder:"JSHSHR (pnfl), Unversitet nomi",size:"large"},on:{keyup:t.onSearch}}),t._v(" "),e("a-button",{staticClass:"add-btn",attrs:{type:"primary",size:"large"},on:{click:t.openVisible}},[t._v(" Yangi universitet admini")])],1),t._v(" "),e("a-table",{attrs:{scroll:{x:"calc(700px + 40%)",y:"100%"},columns:t.columns,rowKey:function(t,e){return e},"data-source":t.user,pagination:!1,loading:!t.isFetched},scopedSlots:t._u([{key:"name",fn:function(e){return[t._v("\n      "+t._s(e)+"\n    ")]}},{key:"action",fn:function(n){return e("span",{},[e("div",{on:{click:function(e){return t.putClick(n.id)}}},[e("a-button",{attrs:{type:"primary",shape:"circle"}},[e("a-icon",{attrs:{type:"edit"}})],1)],1)])}}])}),t._v(" "),e("div",{staticClass:"table--pagination"},[e("a-pagination",{attrs:{total:10*t.totalPages,"page-size":t.pageSize},on:{change:t.handelChange},scopedSlots:t._u([{key:"buildOptionText",fn:function(n){return[e("span",[t._v(t._s(n.value)+" ta dan")])]}}]),model:{value:t.current,callback:function(e){t.current=e},expression:"current"}})],1),t._v(" "),e("a-modal",{attrs:{width:576,"on-ok":"handleOk",footer:null,title:"Yangi universitet admini yaratish"},on:{cancel:t.ddd},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[t.isUpload?e("div",{staticClass:"table--loader"},[e("lottie-player",{staticClass:"lottie-player",staticStyle:{width:"180px",height:"180px"},attrs:{src:"https://assets2.lottiefiles.com/packages/lf20_f1dhzsnx.json",background:"transparent",speed:"1",autoplay:"",loop:""}})],1):e("div",{staticClass:"table--check"},[t.isCheck?e("div",{staticClass:"table--per"},[e("div",[e("h1",[t._v(t._s(t.isUpdate?"":"Haqiqatdan shu yangi adminni qo'shmoqchisizmi?"))]),t._v(" "),t.isUpdate?t._e():e("div",{staticClass:"table--img"},[e("img",{attrs:{src:"data:image/png;base64,".concat(t.checkData.photo),alt:""}})]),t._v(" "),t.isUpdate?t._e():e("div",{staticClass:"table--fullname"},[t._v("\n                    "+t._s(t.checkData.last_name)+" "+t._s(t.checkData.first_name)+" "+t._s(t.checkData.middle_name)+"\n                ")]),t._v(" "),e("a-form",{attrs:{form:t.form},on:{submit:t.handleSubmit}},[e("a-row",{attrs:{gutter:16}},[e("a-col",{staticClass:"gutter-row",attrs:{span:24}},[e("div",{staticClass:"gutter-box"},[e("a-form-item",{attrs:{label:"Biriktiriladigan universitetni nomi"}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["universityId",{rules:[{required:!0,message:"Ushbu maydon to'ldirilishi shart."}]}],expression:"[\n                                        'universityId',\n                                        {rules: [{ required: true, message: 'Ushbu maydon to\\'ldirilishi shart.' }]},\n                                        ]"}],attrs:{placeholder:"Universitetni kiriting","show-search":"","option-filter-prop":"children","filter-option":t.filterOption,size:"large"}},t._l(t.universities,(function(n,r){return e("a-select-option",{key:r,attrs:{value:n.id}},[t._v("\n                                        "+t._s(n.name)+"\n                                    ")])})),1)],1)],1)])],1),t._v(" "),e("div",{staticClass:"modal-footer"},[e("a-button",{attrs:{type:"danger"},on:{click:t.cancel2}},[t._v("\n                            Bekor qilish\n                        ")]),t._v(" "),t.isUpdate?e("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v("\n                            O'zgartirish\n                        ")]):e("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v("\n                            Saqlash\n                        ")])],1)],1)],1)]):e("a-form",{attrs:{form:t.form2},on:{submit:t.handleSubmit2}},[e("a-row",{attrs:{gutter:16}},[e("a-col",{staticClass:"gutter-row",attrs:{span:24}},[e("div",{staticClass:"gutter-box"},[e("a-form-item",{attrs:{label:"JSHSHR raqami (pnfl)"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pinfl",{rules:[{required:!0,message:"Ushbu maydon to'ldirilishi shart."}]}],expression:"[\n                                  'pinfl',\n                                  {rules: [{ required: true, message: 'Ushbu maydon to\\'ldirilishi shart.' }]},\n                                  ]"}],attrs:{placeholder:"JSHSHR raqami (pnfl) ni kiriting",size:"large"}})],1)],1)]),t._v(" "),e("a-col",{staticClass:"gutter-row",attrs:{span:24}},[e("div",{staticClass:"gutter-box"},[e("a-form-item",{attrs:{label:"Passport berilgan sana"}},[e("a-date-picker",{directives:[{name:"decorator",rawName:"v-decorator",value:["given_date",{rules:[{required:!0,message:"Ushbu maydon to'ldirilishi shart."}]}],expression:"[\n                                  'given_date',\n                                  {rules: [{ required: true, message: 'Ushbu maydon to\\'ldirilishi shart.' }]},\n                                  ]"}],attrs:{placeholder:"Passport berilgan sanani kiriting",size:"large"}})],1)],1)])],1),t._v(" "),e("div",{staticClass:"modal-footer"},[e("a-button",{attrs:{type:"danger"},on:{click:t.cancel}},[t._v("\n                  Bekor qilish\n              ")]),t._v(" "),e("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v("\n                  Saqlash\n              ")])],1)],1)],1)])],1)}),[],!1,null,null,null);e.default=component.exports}}]);