(window.webpackJsonp=window.webpackJsonp||[]).push([[38,21],{1362:function(t,e,r){"use strict";r.r(e);r(54),r(340);var n=[{title:"T/R",dataIndex:"id",sorter:!0,width:"10%",scopedSlots:{customRender:"id"}},{title:"JSHSHR raqami (pinfl)",dataIndex:"pinfl",sorter:!0,width:"20%",scopedSlots:{customRender:"pinfl"}},{title:"Universitet nomi",dataIndex:"university",sorter:!0,width:"22%",scopedSlots:{customRender:"university"}},{title:"Ta'lim sohasi",dataIndex:"soha",sorter:!0,width:"15%",scopedSlots:{customRender:"soha"}},{title:"Action",width:"10%",key:"action",scopedSlots:{customRender:"action"}}],o={props:{user:{typeof:Array,default:null},total:{typeof:Number,default:null},totalPages:{typeof:Number,default:null},isFetched:{type:Boolean,default:!1}},data:function(){return{current:parseInt(this.$route.query.page)?parseInt(this.$route.query.page):1,pageSize:10,loading:!1,columns:n,items:[],visible:!1,id:"",search:[],searchText:"",isUpdate:!1,data:[{id:"1",name:"sss"}],universities:[]}},mounted:function(){var t=this;this.$store.dispatch("entity/loadAll",{entity:"university",name:"all",url:"api/user/Universities/",params:{p:"not"},cb:{success:function(e){t.universities=e},error:function(){}}})},methods:{cancel:function(){this.visible=!1,this.isUpdate=!1,this.form2.setFieldsValue({pinfl:null}),this.form2.setFieldsValue({universityId:null}),this.form2.setFieldsValue({soha:null})},openVisible:function(){this.isUpdate=!1,this.visible=!0},ddd:function(){this.isUpdate=!1,this.form2.setFieldsValue({pinfl:null}),this.form2.setFieldsValue({universityId:null}),this.form2.setFieldsValue({soha:null})},onSearch:function(t){var e=this;t.target.value?this.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/searchUser",params:{page:1,limit:20,extra:{search:t.target.value}},cb:{success:function(t){},error:function(){}}}):this.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/users",params:{page:this.$route.query.page?this.$route.query.page:1,limit:20},cb:{success:function(t){e.universities=t},error:function(){}}})},putClick:function(t){var e=this;this.id=t,this.visible=!0,this.isUpdate=!0,this.$store.dispatch("entity/loadOne",{entity:"user",name:t,url:"api/admin/user/".concat(t),params:{p:"not"},cb:{success:function(t){t&&(e.form2.setFieldsValue({pinfl:t.pinfl}),e.form2.setFieldsValue({universityId:t.universityId}),e.form2.setFieldsValue({soha:t.soha}))}}})},handelChange:function(t){this.$router.push({query:{page:t}}),this.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/users",params:{page:parseInt(t),limit:20},cb:{success:function(t){},error:function(){}}})},handleSubmit2:function(t){var e=this;t.preventDefault(),this.form2.validateFields((function(t,r){t||e.$store.dispatch("entity/form",{entity:"user",name:"all",id:e.id,updateData:!!e.isUpdate,prependData:!e.isUpdate,method:e.isUpdate?"put":"post",url:e.isUpdate?"api/admin/updateUser/".concat(e.id):"api/admin/createUser",params:{p:"not"},values:r,cb:{success:function(t){e.visible=!1,e.openNotificationWithIcon("success",t.data.message),e.form2.resetFields(),e.current=e.isUpdate?e.$route.query.page?parseInt(e.$route.query.page):1:parseInt(e.totalPages),e.$router.push({query:{page:e.current}}),e.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/users",params:{page:e.isUpdate?e.$route.query.page:e.totalPages,limit:20},cb:{success:function(t){},error:function(){}}}),e.isUpdate=!1},error:function(t){t.response&&e.openNotificationWithIcon("error",t.response.data.message)}}})}))},handleCancel:function(t){this.visible=!1},openNotificationWithIcon:function(t,e){this.$notification[t]({message:"Diqqat!",description:e})},filterOption:function(input,option){return option.componentOptions.children[0].text.toLowerCase().indexOf(input.toLowerCase())>=0},showDeleteConfirm:function(t){var e=this;this.$store.dispatch("entity/formDefault",{url:"api/admin/deleteUser/".concat(t,"/"),method:"delete",params:{p:"not"},cb:{success:function(t){e.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/users",params:{page:e.isUpdate?e.$route.query.page:e.totalPages,limit:20},cb:{success:function(t){},error:function(){}}}),e.openNotificationWithIcon("success",t.data.message)},error:function(t){e.openNotificationWithIcon("error",t.data.message)}}})}},computed:{},beforeCreate:function(){this.form2=this.$form.createForm(this,{name:"normal_login2"})}},l=r(24),component=Object(l.a)(o,(function(){var t=this,e=t._self._c;return e("div",[e("div",{staticClass:"header-college"},[e("a-input-search",{staticStyle:{width:"550px","margin-bottom":"20px"},attrs:{size:"large",placeholder:"JSHSHR (pnfl), Unversitet nomi"},on:{keyup:t.onSearch}}),t._v(" "),e("a-button",{staticClass:"add-btn",attrs:{type:"primary",size:"large"},on:{click:t.openVisible}},[t._v(" Yangi foydalanuvchilar")])],1),t._v(" "),e("a-table",{attrs:{scroll:{x:"calc(700px + 40%)",y:"100%"},columns:t.columns,rowKey:function(t,e){return e},"data-source":t.user,pagination:!1,loading:!t.isFetched},scopedSlots:t._u([{key:"name",fn:function(e){return[t._v("\n      "+t._s(e)+"\n    ")]}},{key:"action",fn:function(r){return e("span",{},[e("div",{on:{click:function(e){return t.putClick(r.id)}}},[e("a-button",{attrs:{type:"primary",shape:"circle"}},[e("a-icon",{attrs:{type:"edit"}})],1)],1)])}}])}),t._v(" "),e("div",{staticClass:"table--pagination"},[e("a-pagination",{attrs:{total:10*t.totalPages,"page-size":t.pageSize},on:{change:t.handelChange},scopedSlots:t._u([{key:"buildOptionText",fn:function(r){return[e("span",[t._v(t._s(r.value)+" ta dan")])]}}]),model:{value:t.current,callback:function(e){t.current=e},expression:"current"}})],1),t._v(" "),e("a-modal",{attrs:{width:1024,"on-ok":"handleOk",footer:null,title:"Yangi talaba qo'shish"},on:{cancel:t.ddd},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},[e("a-form",{attrs:{form:t.form2},on:{submit:t.handleSubmit2}},[e("a-row",{attrs:{gutter:16}},[e("a-col",{staticClass:"gutter-row",attrs:{span:24}},[e("div",{staticClass:"gutter-box"},[e("a-form-item",{attrs:{label:"JSHSHR raqami (pnfl)"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["pinfl",{rules:[{required:!0,message:"Ushbu maydon to'ldirilishi shart."}]}],expression:"[\n                            'pinfl',\n                            {rules: [{ required: true, message: 'Ushbu maydon to\\'ldirilishi shart.' }]},\n                            ]"}],attrs:{size:"large",placeholder:"JSHSHR raqamini kiriting"}})],1)],1)]),t._v(" "),e("a-col",{staticClass:"gutter-row",attrs:{span:24}},[e("div",{staticClass:"gutter-box"},[e("a-form-item",{attrs:{label:"Universitetni nomi"}},[e("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["universityId",{rules:[{required:!0,message:"Ushbu maydon to'ldirilishi shart."}]}],expression:"[\n                            'universityId',\n                            {rules: [{ required: true, message: 'Ushbu maydon to\\'ldirilishi shart.' }]},\n                            ]"}],attrs:{"show-search":"","option-filter-prop":"children","filter-option":t.filterOption,size:"large",placeholder:"Universitetni nomini tanlang"}},t._l(t.universities,(function(r,n){return e("a-select-option",{key:n,attrs:{value:r.id}},[t._v("\n                          "+t._s(r.name)+"\n                        ")])})),1)],1)],1)]),t._v(" "),e("a-col",{staticClass:"gutter-row",attrs:{span:24}},[e("div",{staticClass:"gutter-box"},[e("a-form-item",{attrs:{label:"Ta'lim sohasi"}},[e("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["soha",{rules:[{required:!0,message:"Ushbu maydon to'ldirilishi shart."}]}],expression:"[\n                            'soha',\n                            {rules: [{ required: true, message: 'Ushbu maydon to\\'ldirilishi shart.' }]},\n                            ]"}],attrs:{size:"large",placeholder:"Ta'lim sohasini kiriting"}})],1)],1)])],1),t._v(" "),e("div",{staticClass:"modal-footer"},[e("a-button",{attrs:{type:"danger"},on:{click:t.cancel}},[t._v("\n            Bekor qilish\n          ")]),t._v(" "),t.isUpdate?e("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v("\n              O'zgartirish\n          ")]):e("a-button",{attrs:{type:"primary","html-type":"submit"}},[t._v("\n              Saqlash\n          ")])],1)],1)],1)],1)}),[],!1,null,null,null);e.default=component.exports},1405:function(t,e,r){"use strict";r.r(e);var n={layout:"DashboardLayout",data:function(){return{items:[]}},mounted:function(){var t=this;this.$store.dispatch("entity/loadAll",{entity:"user",name:"all",url:"api/admin/users",params:{page:this.$route.query.page?this.$route.query.page:1,limit:20},cb:{success:function(e){t.universities=e},error:function(){}}})},computed:{allUser:function(){return this.$store.getters["entity/getEntity"]("user","all")}}},o=r(24),component=Object(o.a)(n,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"main__page"},[e("div",{staticClass:"main__title"},[t._v("\n      Foydalanuvchilar\n  ")]),t._v(" "),e("tables-user",{attrs:{user:t.allUser.items.content,total:t.allUser.items.totalElements,totalPages:t.allUser.items.totalPages,isFetched:t.allUser.isFetched}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{TablesUser:r(1362).default})}}]);