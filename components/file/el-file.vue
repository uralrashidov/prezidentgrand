<template>
  <div>
    <label
      v-if="!file"
      class="el-file h-12 w-full bg-[#FAFBFC] rounded flex items-center px-[11px] cursor-pointer"
    >
      <div>
        <div
          class="bg-[#004FFF] h-8 w-8 rounded flex items-center justify-center"
        >
          <svg
            width="24"
            height="25"
            viewBox="0 0 24 25"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M14.3781 3.36045L4.12664 13.6119L3.59631 13.0815C4.12664 13.6119 4.12729 13.6112 4.1275 13.611L4.12142 13.6172C4.11552 13.6233 4.10562 13.6336 4.09212 13.648C4.06508 13.6767 4.02371 13.7217 3.97117 13.7816C3.86595 13.9017 3.71692 14.0809 3.54925 14.3095C3.21165 14.7699 2.81025 15.4148 2.5323 16.1692C2.25491 16.9222 2.10848 17.7615 2.24856 18.63C2.38712 19.4891 2.81438 20.4313 3.77308 21.39C4.73179 22.3487 5.67403 22.776 6.53311 22.9146C7.40163 23.0547 8.24098 22.9082 8.99388 22.6308C9.74832 22.3529 10.3933 21.9515 10.8536 21.6139C11.0823 21.4462 11.2614 21.2972 11.3815 21.192C11.4415 21.1394 11.4864 21.098 11.5152 21.071C11.5295 21.0575 11.5398 21.0476 11.5459 21.0417L11.5517 21.0361L21.4508 11.137C21.7436 10.8441 22.2185 10.8441 22.5114 11.137C22.8043 11.4299 22.8043 11.9048 22.5114 12.1977L12.6119 22.0972L12.0816 21.5668C12.6119 22.0972 12.6122 22.0969 12.6119 22.0972L12.6091 22.0999L12.6047 22.1043L12.5907 22.118C12.5791 22.1293 12.563 22.1447 12.5427 22.1638C12.5021 22.202 12.4441 22.2552 12.3701 22.3201C12.2223 22.4497 12.0092 22.6266 11.7407 22.8235C11.2067 23.2151 10.4374 23.6976 9.51244 24.0383C8.58597 24.3797 7.48077 24.5868 6.29426 24.3954C5.09831 24.2025 3.87504 23.6133 2.71242 22.4507C1.54981 21.2881 0.960597 20.0648 0.767702 18.8689C0.57633 17.6824 0.783451 16.5772 1.12478 15.6507C1.46555 14.7257 1.94803 13.9565 2.33964 13.4225C2.53657 13.1539 2.71348 12.9409 2.84303 12.793C2.90789 12.719 2.96111 12.6611 2.99934 12.6204C3.01846 12.6001 3.03385 12.5841 3.04509 12.5725L3.05879 12.5585L3.06322 12.554L3.06481 12.5524C3.06508 12.5521 3.06598 12.5512 3.59631 13.0815L3.06598 12.5512L13.319 2.29816L13.8494 2.82849C13.319 2.29816 13.3187 2.29844 13.319 2.29816L13.3202 2.29699L13.3216 2.29556L13.3253 2.29193L13.3358 2.28165C13.3443 2.27349 13.3555 2.26276 13.3694 2.24971C13.3973 2.22364 13.4361 2.18825 13.4852 2.14571C13.5832 2.06081 13.7232 1.94645 13.8996 1.82044C14.2494 1.57053 14.7584 1.26351 15.38 1.05631C16.0047 0.848082 16.7579 0.736161 17.5762 0.899811C18.3999 1.06457 19.2366 1.49825 20.0365 2.29816C20.8364 3.09807 21.2701 3.93475 21.4349 4.75853C21.5985 5.57677 21.4866 6.33005 21.2784 6.95475C21.0712 7.57633 20.7642 8.08526 20.5143 8.43514C20.3883 8.61154 20.2739 8.75151 20.189 8.84948C20.1464 8.89857 20.1111 8.93739 20.085 8.96526C20.0719 8.9792 20.0612 8.99043 20.0531 8.99885L20.0428 9.00939L20.0391 9.01307L20.0377 9.0145C20.0374 9.01479 20.0365 9.01568 19.5062 8.48534L20.0365 9.01568L10.137 18.9152L9.60672 18.3848C10.137 18.9152 10.1373 18.9149 10.137 18.9152L10.1347 18.9175L10.1318 18.9204L10.1243 18.9277L10.1029 18.9481C10.0857 18.9641 10.0627 18.985 10.0344 19.0096C9.97785 19.0586 9.89864 19.1233 9.79958 19.194C9.60438 19.3334 9.31642 19.5079 8.96 19.6267C8.60047 19.7465 8.15655 19.8143 7.66976 19.7169C7.17744 19.6184 6.69431 19.3615 6.24796 18.9152C5.80161 18.4688 5.54469 17.9857 5.44623 17.4934C5.34887 17.0066 5.4166 16.5627 5.53645 16.2031C5.65525 15.8467 5.82968 15.5588 5.96911 15.3636C6.03988 15.2645 6.10452 15.1853 6.15352 15.1287C6.1781 15.1004 6.19899 15.0774 6.21505 15.0603L6.23546 15.0388L6.24275 15.0313L6.24562 15.0284L6.24685 15.0272C6.24712 15.0269 6.24796 15.0261 6.77829 15.5564L6.24796 15.0261L15.4403 5.83369C15.7332 5.5408 16.2081 5.5408 16.501 5.83369C16.7939 6.12659 16.7939 6.60146 16.501 6.89435L7.31205 16.0833C7.31164 16.0837 7.3111 16.0843 7.31045 16.085C7.30649 16.0892 7.29837 16.0981 7.28705 16.1111C7.26423 16.1375 7.22944 16.1798 7.18971 16.2354C7.10817 16.3496 7.01744 16.5036 6.95947 16.6775C6.90254 16.8483 6.88188 17.0231 6.9171 17.1992C6.95122 17.3698 7.04786 17.5938 7.30862 17.8545C7.56937 18.1153 7.79334 18.2119 7.96394 18.246C8.14007 18.2813 8.31487 18.2606 8.48566 18.2037C8.65957 18.1457 8.81356 18.055 8.92772 17.9734C8.98333 17.9337 9.02566 17.8989 9.05199 17.8761C9.06505 17.8648 9.07388 17.8566 9.07812 17.8527L9.07736 17.8535L9.07983 17.8511C9.08058 17.8504 9.08095 17.85 9.08095 17.85L9.07983 17.8511L18.9742 7.95665C18.9742 7.95668 18.9739 7.95704 18.9742 7.95665L18.975 7.95593L18.9896 7.94052C19.0036 7.92558 19.0262 7.90087 19.0555 7.86709C19.1142 7.79933 19.1987 7.69623 19.2937 7.56328C19.4857 7.29444 19.709 6.91948 19.8554 6.48041C20.0007 6.04445 20.0655 5.56029 19.964 5.0527C19.8636 4.55065 19.5902 3.97313 18.9759 3.35882C18.3616 2.74451 17.784 2.47109 17.282 2.37068C16.7744 2.26917 16.2903 2.33402 15.8543 2.47934C15.4152 2.6257 15.0403 2.84902 14.7714 3.04104C14.6385 3.13601 14.5354 3.22052 14.4676 3.27925C14.4338 3.30853 14.4091 3.33114 14.3942 3.34512L14.3793 3.35928C14.3787 3.35978 14.3783 3.36017 14.3781 3.36045Z"
              fill="white"
            />
          </svg>
        </div>
      </div>
      <div class="truncate ml-3 text-[#7D89A1]">{{placeholder}}</div>
      <input
        class="hidden"
        type="file"
        name="file"
        accept="application/pdf, image/*"
        @input="updateValue($event)"
      />
    </label>
    <div
      v-else
      class="el-file h-12 w-full flex items-center border rounded border-[#DFE2EA] bg-[#FAFBFC] px-[11px] relative"
    >
      <div>
        <svg
          width="24"
          height="28"
          viewBox="0 0 24 28"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <mask
            id="mask0_144523_185601"
            style="mask-type: alpha"
            maskUnits="userSpaceOnUse"
            x="0"
            y="0"
            width="24"
            height="28"
          >
            <path
              d="M22.0588 28H1.94118C0.869095 28 0 27.1046 0 26V2C0 0.895431 0.869095 0 1.94118 0H15L24 9.27273V26C24 27.1046 23.1309 28 22.0588 28Z"
              fill="url(#paint0_linear_144523_185601)"
            />
          </mask>
          <g mask="url(#mask0_144523_185601)">
            <path
              d="M22.0588 28H1.94118C0.869095 28 0 27.1046 0 26V2C0 0.895431 0.869095 0 1.94118 0H15L24 9.27273V26C24 27.1046 23.1309 28 22.0588 28Z"
              fill="#FF7981"
            />
            <path
              d="M5.49043 19.7629C5.40214 19.7629 5.32779 19.7318 5.26738 19.6696C5.20696 19.6073 5.17676 19.5307 5.17676 19.4397V15.0445C5.17676 14.9535 5.20696 14.8769 5.26738 14.8147C5.32779 14.7476 5.40214 14.7141 5.49043 14.7141H7.07973C7.5212 14.7141 7.88135 14.7907 8.16017 14.9439C8.43899 15.0971 8.63882 15.2934 8.75964 15.5328C8.88046 15.7722 8.94088 16.0308 8.94088 16.3085C8.94088 16.5862 8.88046 16.8447 8.75964 17.0841C8.63882 17.3235 8.43899 17.5198 8.16017 17.673C7.88135 17.8262 7.5212 17.9028 7.07973 17.9028H5.81108V19.4397C5.81108 19.5307 5.77855 19.6073 5.71349 19.6696C5.65308 19.7318 5.57873 19.7629 5.49043 19.7629ZM7.01699 17.2852C7.49099 17.2852 7.82326 17.1918 8.01379 17.0051C8.20896 16.8184 8.30655 16.5862 8.30655 16.3085C8.30655 16.0308 8.20896 15.7986 8.01379 15.6118C7.82326 15.4251 7.49099 15.3317 7.01699 15.3317H5.81108V17.2852H7.01699Z"
              fill="white"
            />
            <path
              d="M10.6617 19.727C10.5734 19.727 10.4991 19.6959 10.4387 19.6337C10.3783 19.5714 10.3481 19.4948 10.3481 19.4038V15.0445C10.3481 14.9535 10.3783 14.8769 10.4387 14.8147C10.4991 14.7476 10.5734 14.7141 10.6617 14.7141H12.0628C12.5926 14.7141 13.041 14.8362 13.4082 15.0804C13.7799 15.3198 14.0587 15.631 14.2446 16.014C14.4305 16.3971 14.5234 16.7992 14.5234 17.2206C14.5234 17.6419 14.4305 18.0441 14.2446 18.4271C14.0587 18.8101 13.7799 19.1237 13.4082 19.3679C13.041 19.6073 12.5926 19.727 12.0628 19.727H10.6617ZM11.9862 19.1166C12.3672 19.1166 12.7018 19.0376 12.9899 18.8796C13.278 18.7168 13.5011 18.4941 13.6591 18.2117C13.8171 17.9244 13.8961 17.594 13.8961 17.2206C13.8961 16.8471 13.8171 16.5191 13.6591 16.2367C13.5011 15.9494 13.278 15.7267 12.9899 15.5687C12.7018 15.406 12.3672 15.3246 11.9862 15.3246H10.9824V19.1166H11.9862Z"
              fill="white"
            />
            <path
              d="M16.3844 19.7629C16.2961 19.7629 16.2218 19.7318 16.1614 19.6696C16.101 19.6073 16.0708 19.5307 16.0708 19.4397V15.0445C16.0708 14.9535 16.101 14.8769 16.1614 14.8147C16.2218 14.7476 16.2961 14.7141 16.3844 14.7141H19.096C19.1796 14.7141 19.2493 14.7452 19.3051 14.8075C19.3655 14.8649 19.3957 14.9367 19.3957 15.0229C19.3957 15.1091 19.3655 15.1809 19.3051 15.2384C19.2493 15.2958 19.1796 15.3246 19.096 15.3246H16.7051V16.9117H18.852C18.9357 16.9117 19.0054 16.9429 19.0611 17.0051C19.1215 17.0626 19.1518 17.1344 19.1518 17.2206C19.1518 17.3067 19.1215 17.3786 19.0611 17.436C19.0054 17.4935 18.9357 17.5222 18.852 17.5222H16.7051V19.4397C16.7051 19.5307 16.6725 19.6073 16.6075 19.6696C16.5471 19.7318 16.4727 19.7629 16.3844 19.7629Z"
              fill="white"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M7.89313 16.8726L7.89391 16.8718C8.05264 16.7199 8.13028 16.5362 8.13028 16.3084C8.13028 16.0806 8.05264 15.8969 7.89391 15.745L7.89313 15.7443L7.89236 15.7435C7.75253 15.6065 7.47884 15.5135 7.01719 15.5135H5.98775V17.1033H7.01719C7.47884 17.1033 7.75253 17.0103 7.89236 16.8733L7.89313 16.8726ZM5.81128 17.2851V15.3317H7.01719C7.49119 15.3317 7.82346 15.425 8.01399 15.6118C8.20916 15.7985 8.30675 16.0307 8.30675 16.3084C8.30675 16.5861 8.20916 16.8183 8.01399 17.005C7.82346 17.1918 7.49119 17.2851 7.01719 17.2851H5.81128ZM13.5032 19.5212L13.5027 19.5215C13.1017 19.783 12.6188 19.9088 12.063 19.9088H10.6619C10.5286 19.9088 10.4088 19.8597 10.3141 19.7622C10.2194 19.6646 10.1718 19.5412 10.1718 19.4038V15.0444C10.1718 14.9081 10.2186 14.7856 10.3118 14.6884C10.4051 14.5862 10.5254 14.5322 10.6619 14.5322H12.063C12.619 14.5322 13.102 14.6605 13.503 14.9268C13.9002 15.1829 14.2016 15.5184 14.4027 15.9326C14.6006 16.3405 14.7001 16.7705 14.7001 17.2205C14.7001 17.6705 14.6006 18.1005 14.4027 18.5084C14.2016 18.9226 13.9002 19.2604 13.5032 19.5212ZM13.4084 15.0803C13.0412 14.8361 12.5928 14.714 12.063 14.714H10.6619C10.5736 14.714 10.4993 14.7476 10.4389 14.8146C10.3785 14.8768 10.3483 14.9534 10.3483 15.0444V19.4038C10.3483 19.4947 10.3785 19.5713 10.4389 19.6336C10.4993 19.6958 10.5736 19.727 10.6619 19.727H12.063C12.5928 19.727 13.0412 19.6073 13.4084 19.3679C13.7801 19.1237 14.0589 18.8101 14.2448 18.427C14.4307 18.044 14.5236 17.6418 14.5236 17.2205C14.5236 16.7992 14.4307 16.397 14.2448 16.014C14.0589 15.6309 13.7801 15.3197 13.4084 15.0803ZM13.5061 16.3268L13.5058 16.3262C13.3646 16.0696 13.1663 15.8713 12.9072 15.7292L12.9062 15.7286L12.9053 15.7281C12.647 15.5822 12.3425 15.5063 11.9864 15.5063H11.1591V18.9347H11.9864C12.3429 18.9347 12.6478 18.861 12.9062 18.7195C13.1665 18.5723 13.365 18.3733 13.5061 18.1214C13.6469 17.865 13.7198 17.5665 13.7198 17.2205C13.7198 16.8742 13.6468 16.5784 13.5064 16.3274L13.5061 16.3268ZM13.6593 18.2116C13.5013 18.4941 13.2782 18.7167 12.9901 18.8795C12.702 19.0375 12.3674 19.1165 11.9864 19.1165H10.9826V15.3245H11.9864C12.3674 15.3245 12.702 15.4059 12.9901 15.5687C13.2782 15.7267 13.5013 15.9493 13.6593 16.2366C13.8173 16.5191 13.8963 16.847 13.8963 17.2205C13.8963 17.594 13.8173 17.9243 13.6593 18.2116ZM5.49064 19.9447C5.35729 19.9447 5.23752 19.8957 5.14279 19.7981C5.04807 19.7005 5.00049 19.5771 5.00049 19.4397V15.0444C5.00049 14.9081 5.0473 14.7856 5.14048 14.6884C5.23377 14.5862 5.35405 14.5322 5.49064 14.5322H7.07993C7.5395 14.5322 7.93091 14.6117 8.24342 14.7834C8.54708 14.9503 8.776 15.1707 8.91641 15.4489C9.0507 15.715 9.11755 16.0024 9.11755 16.3084C9.11755 16.6144 9.0507 16.9019 8.91641 17.1679C8.776 17.4461 8.54708 17.6665 8.24342 17.8334C7.93091 18.0051 7.5395 18.0846 7.07993 18.0846H5.98775V19.4397C5.98775 19.5804 5.9354 19.7043 5.83616 19.8004C5.7418 19.8965 5.62289 19.9447 5.49064 19.9447ZM5.71369 19.6695C5.65328 19.7317 5.57893 19.7629 5.49064 19.7629C5.40234 19.7629 5.32799 19.7317 5.26758 19.6695C5.20716 19.6073 5.17696 19.5307 5.17696 19.4397V15.0444C5.17696 14.9534 5.20716 14.8768 5.26758 14.8146C5.32799 14.7476 5.40234 14.714 5.49064 14.714H7.07993C7.5214 14.714 7.88155 14.7907 8.16037 14.9439C8.43919 15.0971 8.63902 15.2934 8.75984 15.5328C8.88066 15.7722 8.94108 16.0307 8.94108 16.3084C8.94108 16.5861 8.88066 16.8447 8.75984 17.084C8.63902 17.3234 8.43919 17.5197 8.16037 17.673C7.88155 17.8262 7.5214 17.9028 7.07993 17.9028H5.81128V19.4397C5.81128 19.5307 5.77875 19.6073 5.71369 19.6695ZM16.3846 19.9447C16.2513 19.9447 16.1315 19.8957 16.0368 19.7981C15.9421 19.7005 15.8945 19.5771 15.8945 19.4397V15.0444C15.8945 14.9081 15.9413 14.7856 16.0345 14.6884C16.1278 14.5862 16.248 14.5322 16.3846 14.5322H19.0962C19.2258 14.5322 19.341 14.582 19.4302 14.6788C19.5241 14.7707 19.5724 14.8894 19.5724 15.0229C19.5724 15.1576 19.5232 15.2772 19.4276 15.3694C19.3369 15.4615 19.2223 15.5063 19.0962 15.5063H16.8817V16.7299H18.8522C18.9818 16.7299 19.097 16.7796 19.1862 16.8764C19.2801 16.9683 19.3284 17.087 19.3284 17.2205C19.3284 17.3552 19.2792 17.4749 19.1836 17.5671C19.093 17.6591 18.9783 17.704 18.8522 17.704H16.8817V19.4397C16.8817 19.5804 16.8294 19.7043 16.7302 19.8004C16.6358 19.8965 16.5169 19.9447 16.3846 19.9447ZM16.6077 19.6695C16.6727 19.6073 16.7053 19.5307 16.7053 19.4397V17.5221H18.8522C18.9359 17.5221 19.0056 17.4934 19.0613 17.436C19.1217 17.3785 19.152 17.3067 19.152 17.2205C19.152 17.1343 19.1217 17.0625 19.0613 17.005C19.0056 16.9428 18.9359 16.9117 18.8522 16.9117H16.7053V15.3245H19.0962C19.1798 15.3245 19.2495 15.2958 19.3053 15.2383C19.3657 15.1809 19.3959 15.109 19.3959 15.0229C19.3959 14.9367 19.3657 14.8649 19.3053 14.8074C19.2495 14.7452 19.1798 14.714 19.0962 14.714H16.3846C16.2963 14.714 16.222 14.7476 16.1616 14.8146C16.1012 14.8768 16.071 14.9534 16.071 15.0444V19.4397C16.071 19.5307 16.1012 19.6073 16.1616 19.6695C16.222 19.7317 16.2963 19.7629 16.3846 19.7629C16.4729 19.7629 16.5473 19.7317 16.6077 19.6695Z"
              fill="white"
            />
            <g opacity="0.7" filter="url(#filter0_d_144523_185601)">
              <path
                d="M24 9.27273H16.9412C15.8691 9.27273 15 8.3773 15 7.27273V0L24 9.27273Z"
                fill="#D03954"
              />
            </g>
          </g>
          <defs>
            <filter
              id="filter0_d_144523_185601"
              x="-8"
              y="-24"
              width="59"
              height="59.2727"
              filterUnits="userSpaceOnUse"
              color-interpolation-filters="sRGB"
            >
              <feFlood flood-opacity="0" result="BackgroundImageFix" />
              <feColorMatrix
                in="SourceAlpha"
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"
                result="hardAlpha"
              />
              <feOffset dx="2" dy="1" />
              <feGaussianBlur stdDeviation="12.5" />
              <feColorMatrix
                type="matrix"
                values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.33 0"
              />
              <feBlend
                mode="normal"
                in2="BackgroundImageFix"
                result="effect1_dropShadow_144523_185601"
              />
              <feBlend
                mode="normal"
                in="SourceGraphic"
                in2="effect1_dropShadow_144523_185601"
                result="shape"
              />
            </filter>
            <linearGradient
              id="paint0_linear_144523_185601"
              x1="12"
              y1="0"
              x2="12"
              y2="28"
              gradientUnits="userSpaceOnUse"
            >
              <stop stop-color="#FF7979" />
              <stop offset="1" stop-color="#E85555" />
            </linearGradient>
          </defs>
        </svg>
      </div>
      <p class="truncate ml-3">
        {{ file.name ? file.name.split('.').shift() : file.split('/').pop().split('.').shift() }}
      </p>
      <p class="mr-3">
        .{{ file.name ? file.name.split('.').pop() : file.split('.').pop() }}
      </p>
      <div class="flex-1"></div>
      <button class="text-[#004FFF] text-sm" @click="download">Yuklash</button>
      <button
        class="text-[#EB5757] text-sm absolute bottom-full right-0 mb-2"
        @click="fileClear"
      >
        O‘chirish
      </button>
    </div>
    <!-- <pre v-else>{{ file.name ? file.name : file }}</pre> -->
  </div>
</template>

<script>
export default {
  name: 'ElFile',
  props: {
    file: '',
    placeholder: {
      type: String,
      default: "Faylni yuklang"
    }
  },
  data() {
    return {}
  },
  methods: {
    updateValue(value) {
      if (value.target.files[0]) {
         console.log('sss');
        this.$emit('input', value.target.files[0])
      }
    },
    fileClear() {
      this.$emit('input', '')
    },
    download() {
      if (typeof this.file === 'string') {
        window.open(this.file)
      } else {
        const url = URL.createObjectURL(this.file)
        window.open(url)
      }
    },
  },
}
</script>

<style lang="scss">
.el-file {
  border: 1px solid #dfe2ea;
}
.el-form-item.is-error .el-file {
  border: 1px solid #f56c6c;
}
</style>
